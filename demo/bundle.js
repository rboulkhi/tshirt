(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
const startApp=require(46),pattern={id:"long-sleeve shirt",metadata:{system:"us"},measurements:{base:[{key:"neck_base",value:28},{key:"across_back_shoulder_neck_base_shoulder",value:10},{key:"along_back_neck_base_to_gluteal_hip",value:30},{key:"chest",value:50},{key:"waist",value:45},{key:"hips",value:50},{key:"mid_upper_arm_left",value:30},{key:"maximum_forearm_left",value:20},{key:"shoulder_elbow_wrist_left",value:38},{key:"shoulder_to_midhand_left",value:36},{key:"wrist_left",value:15}],derived:[{key:"half_chest",value:"chest / 2"},{key:"half_waist",value:"waist / 2"},{key:"half_hips",value:"hips / 2"},{key:"third_neck",value:"neck_base / 3"},{key:"third_wrist",value:"wrist_left / 3"},{key:"around_shoulder",value:"mid_upper_arm_left * 1.1"},{key:"half_shoulder",value:"around_shoulder / 2"},{key:"quarter_shoulder",value:"around_shoulder / 4"}]},parts:[{id:"front",symmetry:!0,points:[{x:1,y:3.1},{x:4.75,y:1},{x:9.6,y:6.6},{x:10,y:8},{x:11,y:10},{x:12.75,y:10},{x:11.5,y:20},{x:11.5,y:26.25},{x:6,y:27.5},{x:1,y:28}],constraints:{distances:[{points:[0,9],distance:"along_back_neck_base_to_gluteal_hip"},{points:[5,-5],distance:"half_chest"},{points:[6,-6],distance:"half_waist"},{points:[7,-7],distance:"half_hips"},{points:[1,0,-1],distance:"third_neck"},{points:[2,3,4,5],distance:"quarter_shoulder"}],angles:[]}},{id:"back",symmetry:!0,points:[{x:1,y:-1},{x:8,y:-1.7},{x:11,y:-3.5},{x:10.5,y:-11},{x:11,y:-15},{x:12.5,y:-19.5},{x:10,y:-21},{x:9.5,y:-25.2},{x:1,y:-27}],constraints:{distances:[{points:[0,8],distance:"along_back_neck_base_to_gluteal_hip"},{points:[5,-5],distance:"half_chest"},{points:[3,-3],distance:"half_waist"},{points:[2,-2],distance:"half_hips"},{points:[5,6,7],distance:"quarter_shoulder"},{points:[7,8],distance:"across_back_shoulder_neck_base_shoulder"}],angles:[]}},{id:"arm front",symmetry:!1,points:[{x:1.5,y:-1},{x:1,y:-3},{x:1,y:-6.1},{x:17,y:-5},{x:25.2,y:-3.5},{x:24.75,y:-1},{x:21,y:-1.5},{x:16,y:-1.25},{x:12,y:-1.5},{x:7,y:-2}],constraints:{distances:[{points:[4,5],distance:"third_wrist"},{points:[0,1,2],distance:"quarter_shoulder"}],angles:[]}},{id:"arm back",symmetry:!1,points:[{x:1,y:1.25},{x:2.5,y:4.5},{x:3.25,y:7.5},{x:10,y:5.5},{x:18,y:4.5},{x:23,y:4.25},{x:26.1,y:4.4},{x:26.5,y:2.5},{x:17,y:1.5},{x:7,y:1},{x:4,y:1}],constraints:{distances:[{points:[6,7],distance:"third_wrist"},{points:[0,1,2],distance:"quarter_shoulder"}],angles:[]}},{id:"arm top",symmetry:!1,points:[{x:1,y:8.9},{x:7,y:9.25},{x:20,y:9},{x:35,y:8.25},{x:35,y:4},{x:31,y:4.5},{x:23,y:3.5},{x:14,y:1.5},{x:12.5,y:1},{x:10.5,y:1},{x:4,y:3.75},{x:3,y:6.25},{x:2,y:6.75},{x:1,y:7}],constraints:{distances:[{points:[10,11,12,13],distance:"third_neck"},{points:[0,1,2,3],distance:"shoulder_elbow_wrist_left"},{points:[4,5,6,7,8,9,10],distance:"shoulder_to_midhand_left"},{points:[3,4],distance:"third_wrist"},{points:[1,9],distance:"half_shoulder"},{points:[0,1],distance:"across_back_shoulder_neck_base_shoulder"}],angles:[]}},{id:"arm top left",from:"arm top",reflect:"x"},{id:"arm front left",from:"arm front",reflect:"x"},{id:"arm back left",from:"arm back",reflect:"x"}]},el=startApp({pattern:pattern});document.body.appendChild(el);

},{"46":46}],2:[function(require,module,exports){
module.exports=function(e,n){return"number"==typeof e?e:"number"==typeof n?n:0};

},{}],3:[function(require,module,exports){

},{}],4:[function(require,module,exports){
module.exports={};

},{}],5:[function(require,module,exports){
function Choo(t){if(!(this instanceof Choo))return new Choo(t);t=t||{};var e=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===t.history||t.history,this._hrefEnabled=void 0===t.href||t.href,this._hasWindow="undefined"!=typeof window,this._createLocation=nanolocation,this._loaded=!1,this._tree=null,this.router=nanorouter({curry:!0}),this.emitter=nanobus("choo.emit"),this.state={events:this._events},this._hasWindow&&(this.state.title=document.title),this.emitter.prependListener(this._events.DOMTITLECHANGE,function(t){e.state.title=t,e._hasWindow&&(document.title=t)})}var scrollToAnchor=require(32),documentReady=require(7),nanolocation=require(21),nanotiming=require(28),nanorouter=require(27),nanomorph=require(22),nanoquery=require(25),nanohref=require(20),nanoraf=require(26),nanobus=require(19),xtend=require(42);module.exports=Choo;var HISTORY_OBJECT={};Choo.prototype.route=function(t,e){var n=this;this.router.on(t,function(o){return function(){n.state.params=o,n.state.route=t;var r=nanotiming("choo.route('"+t+"')"),i=e(n.state,function(t,e){n.emitter.emit(t,e)});return r(),i}})},Choo.prototype.use=function(t){var e=nanotiming("choo.use");t(this.state,this.emitter,this),e()},Choo.prototype.start=function(){var t=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){t.state.query=nanoquery(window.location.search),t._loaded&&(t.emitter.emit(t._events.RENDER),setTimeout(scrollToAnchor.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){window.history.pushState(HISTORY_OBJECT,null,e),t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){window.history.replaceState(HISTORY_OBJECT,null,e),t.emitter.emit(t._events.NAVIGATE)}),window.onpopstate=function(){t.emitter.emit(t._events.POPSTATE)},t._hrefEnabled&&nanohref(function(e){var n=e.href;n!==window.location.href&&t.emitter.emit(t._events.PUSHSTATE,n)})),this.state.href=this._createLocation(),this._tree=this.router(this.state.href),this.state.query=nanoquery(window.location.search),this.emitter.prependListener(t._events.RENDER,nanoraf(function(){var e=nanotiming("choo.render");t.state.href=t._createLocation();var n=t.router(t.state.href),o=nanotiming("choo.morph");nanomorph(t._tree,n),o(),e()})),documentReady(function(){t.emitter.emit(t._events.DOMCONTENTLOADED),t._loaded=!0}),this._tree},Choo.prototype.mount=function(t){var e=this;documentReady(function(){var n=nanotiming("choo.render"),o=e.start();e._tree=document.querySelector(t);var r=nanotiming("choo.morph");nanomorph(e._tree,o),r(),n()})},Choo.prototype.toString=function(t,e){return this.state=xtend(this.state,e||{}),this.state.href=t.replace(/\?.+$/,""),this.state.query=nanoquery(t),this.router(t).toString()};

},{"19":19,"20":20,"21":21,"22":22,"25":25,"26":26,"27":27,"28":28,"32":32,"42":42,"7":7}],6:[function(require,module,exports){
function clamp(c,e,l){return e<l?c<e?e:c>l?l:c:c<l?l:c>e?e:c}module.exports=clamp;

},{}],7:[function(require,module,exports){
"use strict";function ready(e){var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})}module.exports=ready;

},{}],8:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.exprEval=e()}(this,function(){"use strict";function t(t,e){this.type=t,this.value=void 0!==e&&null!==e?e:0}function e(e){return new t(K,e)}function s(e){return new t(Q,e)}function r(e){return new t(Y,e)}function n(e,s,r,i,o){for(var a,h,p,u=[],c=[],l=0;l<e.length;l++){var f=e[l],v=f.type;if(v===H)u.push(f);else if(v===Z&&o.hasOwnProperty(f.value))f=new t(H,o[f.value]),u.push(f);else if(v===Q&&u.length>1)h=u.pop(),a=u.pop(),f=new t(H,(0,r[f.value])(a.value,h.value)),u.push(f);else if(v===Y&&u.length>2)p=u.pop(),h=u.pop(),a=u.pop(),"?"===f.value?u.push(a.value?h.value:p.value):(f=new t(H,(0,i[f.value])(a.value,h.value,p.value)),u.push(f));else if(v===K&&u.length>0)a=u.pop(),f=new t(H,(0,s[f.value])(a.value)),u.push(f);else if(v===et){for(;u.length>0;)c.push(u.shift());c.push(new t(et,n(f.value,s,r,i,o)))}else if(v===st&&u.length>0)a=u.pop(),u.push(new t(H,a.value[f.value]));else{for(;u.length>0;)c.push(u.shift());c.push(f)}}for(;u.length>0;)c.push(u.shift());return c}function i(n,o,a){for(var h=[],p=0;p<n.length;p++){var u=n[p],c=u.type;if(c===Z&&u.value===o)for(var l=0;l<a.tokens.length;l++){var f,v=a.tokens[l];f=v.type===K?e(v.value):v.type===Q?s(v.value):v.type===Y?r(v.value):new t(v.type,v.value),h.push(f)}else h.push(c===et?new t(et,i(u.value,o,a)):u)}return h}function o(t,e,s){for(var r,n,i,a,h=[],p=0;p<t.length;p++){var u=t[p],c=u.type;if(c===H)h.push(u.value);else if(c===Q)n=h.pop(),r=h.pop(),a=e.binaryOps[u.value],h.push(a(r,n));else if(c===Y)i=h.pop(),n=h.pop(),r=h.pop(),"?"===u.value?h.push(o(r?n:i,e,s)):(a=e.ternaryOps[u.value],h.push(a(r,n,i)));else if(c===Z)if(u.value in e.functions)h.push(e.functions[u.value]);else{var l=s[u.value];if(void 0===l)throw new Error("undefined variable: "+u.value);h.push(l)}else if(c===K)r=h.pop(),a=e.unaryOps[u.value],h.push(a(r));else if(c===tt){for(var f=u.value,v=[];f-- >0;)v.unshift(h.pop());if(!(a=h.pop()).apply||!a.call)throw new Error(a+" is not a function");h.push(a.apply(void 0,v))}else if(c===et)h.push(u.value);else{if(c!==st)throw new Error("invalid Expression");r=h.pop(),h.push(r[u.value])}}if(h.length>1)throw new Error("invalid Expression (parity)");return h[0]}function a(t,e){for(var s,r,n,i,o=[],p=0;p<t.length;p++){var u=t[p],c=u.type;if(c===H)o.push("number"==typeof u.value&&u.value<0?"("+u.value+")":h(u.value));else if(c===Q)r=o.pop(),s=o.pop(),i=u.value,o.push(e?"^"===i?"Math.pow("+s+", "+r+")":"and"===i?"(!!"+s+" && !!"+r+")":"or"===i?"(!!"+s+" || !!"+r+")":"||"===i?"(String("+s+") + String("+r+"))":"=="===i?"("+s+" === "+r+")":"!="===i?"("+s+" !== "+r+")":"("+s+" "+i+" "+r+")":"("+s+" "+i+" "+r+")");else if(c===Y){if(n=o.pop(),r=o.pop(),s=o.pop(),"?"!==(i=u.value))throw new Error("invalid Expression");o.push("("+s+" ? "+r+" : "+n+")")}else if(c===Z)o.push(u.value);else if(c===K)s=o.pop(),i=u.value,o.push("-"===i||"+"===i?"("+i+s+")":e?"not"===i?"(!"+s+")":"!"===i?"fac("+s+")":i+"("+s+")":"!"===i?"("+s+"!)":"("+i+" "+s+")");else if(c===tt){for(var l=u.value,f=[];l-- >0;)f.unshift(o.pop());i=o.pop(),o.push(i+"("+f.join(", ")+")")}else if(c===st)s=o.pop(),o.push(s+"."+u.value);else{if(c!==et)throw new Error("invalid Expression");o.push("("+a(u.value,e)+")")}}if(o.length>1)throw new Error("invalid Expression (parity)");return o[0]}function h(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function p(t,e){for(var s=0;s<t.length;s++)if(t[s]===e)return!0;return!1}function u(t,e,s){for(var r=!!(s=s||{}).withMembers,n=null,i=0;i<t.length;i++){var o=t[i];o.type!==Z||p(e,o.value)?o.type===st&&r&&null!==n?n+="."+o.value:o.type===et?u(o.value,e,s):null!==n&&(p(e,n)||e.push(n),n=null):r?null!==n?(p(e,n)||e.push(n),n=o.value):n=o.value:e.push(o.value)}null===n||p(e,n)||e.push(n)}function c(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function l(t,e,s){this.type=t,this.value=e,this.index=s}function f(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options}function v(t){return it.hasOwnProperty(t)?it[t]:t}function x(t,e,s){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==s.allowMemberAccess}function y(t,e){return Number(t)+Number(e)}function w(t,e){return t-e}function M(t,e){return t*e}function d(t,e){return t/e}function g(t,e){return t%e}function E(t,e){return""+t+e}function k(t,e){return t===e}function b(t,e){return t!==e}function m(t,e){return t>e}function T(t,e){return t<e}function A(t,e){return t>=e}function O(t,e){return t<=e}function C(t,e){return Boolean(t&&e)}function N(t,e){return Boolean(t||e)}function P(t,e){return p(e,t)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function R(t){return(Math.exp(t)+Math.exp(-t))/2}function F(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function S(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function L(t){return Math.log(t+Math.sqrt(t*t-1))}function U(t){return Math.log((1+t)/(1-t))/2}function q(t){return Math.log(t)*Math.LOG10E}function B(t){return-t}function $(t){return!t}function G(t){return t<0?Math.ceil(t):Math.floor(t)}function _(t){return Math.random()*(t||1)}function j(t){return W(t+1)}function J(t){return isFinite(t)&&t===Math.round(t)}function W(t){var e,s;if(J(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,n=t-1;r>1;)n*=r,r--;return 0===n&&(n=1),n}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*W(1-t));if(t>=171.35)return 1/0;if(t>85){var i=t*t,o=i*t,a=o*t,h=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*i)-139/(51840*o)-571/(2488320*a)+163879/(209018880*h)+5246819/(75246796800*h*t))}--t,s=ut[0];for(var p=1;p<ut.length;++p)s+=ut[p]/(t+p);return e=t+pt+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*s}function V(t){return String(t).length}function X(){for(var t=0,e=0,s=0;s<arguments.length;s++){var r,n=Math.abs(arguments[s]);e<n?(t=t*(r=e/n)*r+1,e=n):t+=n>0?(r=n/e)*r:n}return e===1/0?1/0:e*Math.sqrt(t)}function z(t,e,s){return t?e:s}function D(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||I,cosh:Math.cosh||R,tanh:Math.tanh||F,asinh:Math.asinh||S,acosh:Math.acosh||L,atanh:Math.atanh||U,sqrt:Math.sqrt,log:Math.log,ln:Math.log,lg:Math.log10||q,log10:Math.log10||q,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||G,"-":B,"+":Number,exp:Math.exp,not:$,length:V,"!":j},this.binaryOps={"+":y,"-":w,"*":M,"/":d,"%":g,"^":Math.pow,"||":E,"==":k,"!=":b,">":m,"<":T,">=":A,"<=":O,and:C,or:N,in:P},this.ternaryOps={"?":z},this.functions={random:_,fac:j,min:Math.min,max:Math.max,hypot:Math.hypot||X,pyt:Math.hypot||X,pow:Math.pow,atan2:Math.atan2,if:z,gamma:W},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}var H="INUMBER",K="IOP1",Q="IOP2",Y="IOP3",Z="IVAR",tt="IFUNCALL",et="IEXPR",st="IMEMBER";t.prototype.toString=function(){switch(this.type){case H:case K:case Q:case Y:case Z:return this.value;case tt:return"CALL "+this.value;case st:return"."+this.value;default:return"Invalid Instruction"}},c.prototype.simplify=function(t){return t=t||{},new c(n(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t),this.parser)},c.prototype.substitute=function(t,e){return e instanceof c||(e=this.parser.parse(String(e))),new c(i(this.tokens,t,e),this.parser)},c.prototype.evaluate=function(t){return t=t||{},o(this.tokens,this,t)},c.prototype.toString=function(){return a(this.tokens,!1)},c.prototype.symbols=function(t){t=t||{};var e=[];return u(this.tokens,e,t),e},c.prototype.variables=function(t){t=t||{};var e=[];u(this.tokens,e,t);var s=this.functions;return e.filter(function(t){return!(t in s)})},c.prototype.toJSFunction=function(t,e){var s=this,r=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+a(this.simplify(e).tokens,!0)+"; }");return function(){return r.apply(s,arguments)}};var rt="TOP";l.prototype.toString=function(){return this.type+": "+this.value},f.prototype.newToken=function(t,e,s){return new l(t,e,null!=s?s:this.pos)},f.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},f.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},f.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isComma()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},f.prototype.isString=function(){var t=!1,e=this.pos,s=this.expression.charAt(e);if("'"===s||'"'===s)for(var r=this.expression.indexOf(s,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var n=this.expression.substring(e+1,r);this.current=this.newToken("TSTRING",this.unescape(n),e),t=!0;break}r=this.expression.indexOf(s,r+1)}return t},f.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken("TPAREN",t),this.pos++,!0)},f.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},f.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var s=this.expression.charAt(e);if(s.toUpperCase()===s.toLowerCase()&&(e===this.pos||"_"!==s&&"."!==s&&(s<"0"||s>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken("TNUMBER",this.consts[r]),this.pos+=r.length,!0}return!1},f.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var s=this.expression.charAt(e);if(s.toUpperCase()===s.toLowerCase()&&(e===this.pos||"_"!==s&&(s<"0"||s>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(rt,r),this.pos+=r.length,!0}return!1},f.prototype.isName=function(){for(var t=this.pos,e=t,s=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&"$"===r)continue;if(e===this.pos||!s||"_"!==r&&(r<"0"||r>"9"))break}else s=!0}if(s){var n=this.expression.substring(t,e);return this.current=this.newToken("TNAME",n),this.pos+=n.length,!0}return!1},f.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var nt=/^[0-9a-f]{4}$/i;f.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var s=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":s+="'";break;case'"':s+='"';break;case"\\":s+="\\";break;case"/":s+="/";break;case"b":s+="\b";break;case"f":s+="\f";break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"u":var n=t.substring(e+1,e+5);nt.test(n)||this.parseError("Illegal escape sequence: \\u"+n),s+=String.fromCharCode(parseInt(n,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var i=t.indexOf("\\",e);s+=t.substring(e,i<0?t.length:i),e=i}return s},f.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},f.prototype.isRadixInteger=function(){var t=this.pos;if(t>=this.expression.length-2||"0"!==this.expression.charAt(t))return!1;++t;var e,s;if("x"===this.expression.charAt(t))e=16,s=/^[0-9a-f]$/i,++t;else{if("b"!==this.expression.charAt(t))return!1;e=2,s=/^[01]$/i,++t}for(var r=!1,n=t;t<this.expression.length;){var i=this.expression.charAt(t);if(!s.test(i))break;t++,r=!0}return r&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(n,t),e)),this.pos=t),r},f.prototype.isNumber=function(){for(var t,e=!1,s=this.pos,r=s,n=s,i=!1,o=!1;s<this.expression.length&&((t=this.expression.charAt(s))>="0"&&t<="9"||!i&&"."===t);)"."===t?i=!0:o=!0,s++,e=o;if(e&&(n=s),"e"===t||"E"===t){s++;for(var a=!0,h=!1;s<this.expression.length;){if(t=this.expression.charAt(s),!a||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;h=!0,a=!1}else a=!1;s++}h||(s=n)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(r,s))),this.pos=s):this.pos=n,e},f.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(rt,e);else if("∙"===e||"•"===e)this.current=this.newToken(rt,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(rt,">="),this.pos++):this.current=this.newToken(rt,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(rt,"<="),this.pos++):this.current=this.newToken(rt,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(rt,"||"),this.pos++}else if("="===e){if("="!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(rt,"=="),this.pos++}else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(rt,"!="),this.pos++):this.current=this.newToken(rt,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)};var it={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional"};f.prototype.isOperatorEnabled=function(t){var e=v(t),s=this.options.operators||{};return"in"===e?!!s.in:!(e in s&&!s[e])},f.prototype.getCoordinates=function(){var t,e=0,s=-1;do{e++,t=this.pos-s,s=this.expression.indexOf("\n",s+1)}while(s>=0&&s<this.pos);return{line:e,column:t}},f.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},x.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},x.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?p(e,t.value):"function"==typeof e?e(t):t.value===e)},x.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},x.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},x.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},x.prototype.expect=function(t,e){if(!this.accept(t,e)){var s=this.tokens.getCoordinates();throw new Error("parse error ["+s.line+":"+s.column+"]: Expected "+(e||t))}},x.prototype.parseAtom=function(e){if(this.accept("TNAME"))e.push(new t(Z,this.current.value));else if(this.accept("TNUMBER"))e.push(new t(H,this.current.value));else if(this.accept("TSTRING"))e.push(new t(H,this.current.value));else{if(!this.accept("TPAREN","("))throw new Error("unexpected "+this.nextToken);this.parseExpression(e),this.expect("TPAREN",")")}},x.prototype.parseExpression=function(t){this.parseConditionalExpression(t)},x.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(rt,"?");){var s=[],n=[];this.parseConditionalExpression(s),this.expect(rt,":"),this.parseConditionalExpression(n),e.push(new t(et,s)),e.push(new t(et,n)),e.push(r("?"))}},x.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(rt,"or");)this.parseAndExpression(t),t.push(s("or"))},x.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(rt,"and");)this.parseComparison(t),t.push(s("and"))};var ot=["==","!=","<","<=",">=",">","in"];x.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(rt,ot);){var e=this.current;this.parseAddSub(t),t.push(s(e.value))}};var at=["+","-","||"];x.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(rt,at);){var e=this.current;this.parseTerm(t),t.push(s(e.value))}};var ht=["*","/","%"];x.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(rt,ht);){var e=this.current;this.parseFactor(t),t.push(s(e.value))}},x.prototype.parseFactor=function(t){var s=this.tokens.unaryOps;if(this.save(),this.accept(rt,function(t){return t.value in s}))if("-"!==this.current.value&&"+"!==this.current.value&&"TPAREN"===this.nextToken.type&&"("===this.nextToken.value)this.restore(),this.parseExponential(t);else{var r=this.current;this.parseFactor(t),t.push(e(r.value))}else this.parseExponential(t)},x.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(rt,"^");)this.parseFactor(t),t.push(s("^"))},x.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(rt,"!");)t.push(e("!"))},x.prototype.parseFunctionCall=function(s){var r=this.tokens.unaryOps;if(this.accept(rt,function(t){return t.value in r})){var n=this.current;this.parseAtom(s),s.push(e(n.value))}else for(this.parseMemberExpression(s);this.accept("TPAREN","(");)if(this.accept("TPAREN",")"))s.push(new t(tt,0));else{var i=this.parseArgumentList(s);s.push(new t(tt,i))}},x.prototype.parseArgumentList=function(t){for(var e=0;!this.accept("TPAREN",")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},x.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(rt,".");){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),e.push(new t(st,this.current.value))}};var pt=4.7421875,ut=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];D.prototype.parse=function(t){var e=[],s=new x(this,new f(this,t),{allowMemberAccess:this.options.allowMemberAccess});return s.parseExpression(e),s.expect("TEOF","EOF"),new c(e,this)},D.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var ct=new D;return D.parse=function(t){return ct.parse(t)},D.evaluate=function(t,e){return ct.parse(t).evaluate(e)},{Parser:D,Expression:c}});

},{}],9:[function(require,module,exports){
function add(d,e,n){return d[0]=e[0]+n[0],d[1]=e[1]+n[1],d}module.exports=add;

},{}],10:[function(require,module,exports){
function copy(o,c){return o[0]=c[0],o[1]=c[1],o}module.exports=copy;

},{}],11:[function(require,module,exports){
function create(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}module.exports=create;

},{}],12:[function(require,module,exports){
function distance(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}module.exports=distance;

},{}],13:[function(require,module,exports){
function dot(o,t){return o[0]*t[0]+o[1]*t[1]}module.exports=dot;

},{}],14:[function(require,module,exports){
function fromValues(r,e){var o=new Float32Array(2);return o[0]=r,o[1]=e,o}module.exports=fromValues;

},{}],15:[function(require,module,exports){
function multiply(l,t,u){return l[0]=t[0]*u[0],l[1]=t[1]*u[1],l}module.exports=multiply;

},{}],16:[function(require,module,exports){
function scale(e,c,l){return e[0]=c[0]*l,e[1]=c[1]*l,e}module.exports=scale;

},{}],17:[function(require,module,exports){
function squaredLength(e){var r=e[0],n=e[1];return r*r+n*n}module.exports=squaredLength;

},{}],18:[function(require,module,exports){
function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t}module.exports=subtract;

},{}],19:[function(require,module,exports){
function Nanobus(t){if(!(this instanceof Nanobus))return new Nanobus(t);this._name=t||"nanobus",this._starListeners=[],this._listeners={}}var splice=require(30),nanotiming=require(28);module.exports=Nanobus,Nanobus.prototype.emit=function(t,s){var e=nanotiming(this._name+"('"+t+"')"),i=this._listeners[t];return i&&i.length>0&&this._emit(this._listeners[t],s),this._starListeners.length>0&&this._emit(this._starListeners,t,s,e.uuid),e(),this},Nanobus.prototype.on=Nanobus.prototype.addListener=function(t,s){return"*"===t?this._starListeners.push(s):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(s)),this},Nanobus.prototype.prependListener=function(t,s){return"*"===t?this._starListeners.unshift(s):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].unshift(s)),this},Nanobus.prototype.once=function(t,s){function e(){s.apply(i,arguments),i.removeListener(t,e)}var i=this;return this.on(t,e),this},Nanobus.prototype.prependOnceListener=function(t,s){function e(){s.apply(i,arguments),i.removeListener(t,e)}var i=this;return this.prependListener(t,e),this},Nanobus.prototype.removeListener=function(t,s){function e(t,s){if(t){var e=t.indexOf(s);return-1!==e?(splice(t,e,1),!0):void 0}}return"*"===t?(this._starListeners=this._starListeners.slice(),e(this._starListeners,s)):(void 0!==this._listeners[t]&&(this._listeners[t]=this._listeners[t].slice()),e(this._listeners[t],s))},Nanobus.prototype.removeAllListeners=function(t){return t?"*"===t?this._starListeners=[]:this._listeners[t]=[]:(this._starListeners=[],this._listeners={}),this},Nanobus.prototype.listeners=function(t){var s="*"!==t?this._listeners[t]:this._starListeners,e=[];if(s)for(var i=s.length,n=0;n<i;n++)e.push(s[n]);return e},Nanobus.prototype._emit=function(t,s,e,i){if(void 0!==t){void 0===e&&(e=s,s=null);for(var n=t.length,r=0;r<n;r++){var o=t[r];s?void 0!==i?o(s,e,i):o(s,e):o(e)}}};

},{"28":28,"30":30}],20:[function(require,module,exports){
function href(e,t){t=t||window.document,window.addEventListener("click",function(r){if(!(r.button&&0!==r.button||r.ctrlKey||r.metaKey||r.altKey||r.shiftKey||r.defaultPrevented)){var n=function e(r){if(r&&r!==t)return"a"!==r.localName||void 0===r.href?e(r.parentNode):r}(r.target);n&&(window.location.origin!==n.origin||n.hasAttribute("download")||"_blank"===n.getAttribute("target")&&safeExternalLink.test(n.getAttribute("rel"))||protocolLink.test(n.getAttribute("href"))||(r.preventDefault(),e(n)))}})}var safeExternalLink=/[noopener|noreferrer] [noopener|noreferrer]/,protocolLink=/^[\w-_]+:/;module.exports=href;

},{}],21:[function(require,module,exports){
function nanolocation(){return window.location.pathname.replace(/\/$/,"")+window.location.hash.replace(/^#/,"/")}module.exports=nanolocation;

},{}],22:[function(require,module,exports){
function nanomorph(e,a){return walk(a,e)}function walk(e,a){return a?e?e.isSameNode&&e.isSameNode(a)?a:e.tagName!==a.tagName?e:(morph(e,a),updateChildren(e,a),a):null:e}function updateChildren(e,a){for(var i,d,l,o,r=0,n=0;i=a.childNodes[n],d=e.childNodes[n-r],i||d;n++)if(d)if(i)if(same(d,i))(l=walk(d,i))!==i&&(a.replaceChild(l,i),r++);else{o=null;for(var m=n;m<a.childNodes.length;m++)if(same(a.childNodes[m],d)){o=a.childNodes[m];break}o?((l=walk(d,o))!==o&&r++,a.insertBefore(l,i)):d.id||i.id?(a.insertBefore(d,i),r++):(l=walk(d,i))!==i&&(a.replaceChild(l,i),r++)}else a.appendChild(d),r++;else a.removeChild(i),n--}function same(e,a){return e.id?e.id===a.id:e.isSameNode?e.isSameNode(a):e.tagName===a.tagName&&(e.type===TEXT_NODE&&e.nodeValue===a.nodeValue)}var morph=require(24),TEXT_NODE=3;module.exports=nanomorph;

},{"24":24}],23:[function(require,module,exports){
module.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"];

},{}],24:[function(require,module,exports){
function morph(e,t){var u=e.nodeType,a=e.nodeName;u===ELEMENT_NODE&&copyAttrs(e,t),u!==TEXT_NODE&&u!==COMMENT_NODE||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===a?updateInput(e,t):"OPTION"===a?updateOption(e,t):"TEXTAREA"===a&&updateTextarea(e,t),copyEvents(e,t)}function copyAttrs(e,t){for(var u=t.attributes,a=e.attributes,r=null,n=null,l=null,i=null,o=a.length-1;o>=0;--o)l=(i=a[o]).name,r=i.namespaceURI,n=i.value,r?(l=i.localName||l,t.getAttributeNS(r,l)!==n&&t.setAttributeNS(r,l,n)):t.hasAttribute(l)?t.getAttribute(l)!==n&&("null"===n||"undefined"===n?t.removeAttribute(l):t.setAttribute(l,n)):t.setAttribute(l,n);for(var v=u.length-1;v>=0;--v)!1!==(i=u[v]).specified&&(l=i.name,(r=i.namespaceURI)?(l=i.localName||l,e.hasAttributeNS(r,l)||t.removeAttributeNS(r,l)):e.hasAttributeNS(null,l)||t.removeAttribute(l))}function copyEvents(e,t){for(var u=0;u<eventsLength;u++){var a=events[u];e[a]?t[a]=e[a]:t[a]&&(t[a]=void 0)}}function updateOption(e,t){updateAttribute(e,t,"selected")}function updateInput(e,t){var u=e.value,a=t.value;updateAttribute(e,t,"checked"),updateAttribute(e,t,"disabled"),u!==a&&(t.setAttribute("value",u),t.value=u),"null"===u&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=u):t.removeAttribute("value")}function updateTextarea(e,t){var u=e.value;if(u!==t.value&&(t.value=u),t.firstChild&&t.firstChild.nodeValue!==u){if(""===u&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=u}}function updateAttribute(e,t,u){e[u]!==t[u]&&(t[u]=e[u],e[u]?t.setAttribute(u,""):t.removeAttribute(u))}var events=require(23),eventsLength=events.length,ELEMENT_NODE=1,TEXT_NODE=3,COMMENT_NODE=8;module.exports=morph;

},{"23":23}],25:[function(require,module,exports){
function qs(e){var n={};return e.replace(/^.*\?/,"").replace(reg,function(e,o,r,d){n[window.decodeURIComponent(o)]=window.decodeURIComponent(d)}),n}var reg=new RegExp("([^?=&]+)(=([^&]*))?","g");module.exports=qs;

},{}],26:[function(require,module,exports){
"use strict";function nanoraf(n,r){r||(r=window.requestAnimationFrame);var a=!1,o=null;return function(){null!==o||a||(a=!0,r(function(){a=!1;for(var r=o.length,t=new Array(r),u=0;u<r;u++)t[u]=o[u];n.apply(n,t),o=null})),o=arguments}}module.exports=nanoraf;

},{}],27:[function(require,module,exports){
function Nanorouter(e){function r(e){return n?(e=pathname(e,isLocalFile))===a?t():(a=e,(t=o(e))()):o(e)}var o=wayfarer((e=e||{}).default||"/404"),n=e.curry||!1,t=null,a=null;return r.router=o,r.on=function(e,r){e=e.replace(/^[#/]/,""),o.on(e,r)},r}function pathname(e,r){return(e=r?e.replace(stripElectron,""):e.replace(prefix,"")).replace(suffix,"").replace(normalize,"/")}var wayfarer=require(40),isLocalFile=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),electron="^(file://|/)(.*.html?/?)?",protocol="^(http(s)?(://))?(www.)?",domain="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",qs="[?].*$",stripElectron=new RegExp(electron),prefix=new RegExp(protocol+domain),normalize=new RegExp("#"),suffix=new RegExp(qs);module.exports=Nanorouter;

},{"40":40}],28:[function(require,module,exports){
function nanotiming(r){function e(e){var a="end-"+n+"-"+r;perf.mark(a),onIdle(function(){var i=r+" ["+n+"]";perf.measure(i,o,a),perf.clearMarks(o),perf.clearMarks(a),e&&e(r)})}if(disabled)return noop;var n=(100*perf.now()).toFixed(),o="start-"+n+"-"+r;return perf.mark(o),e.uuid=n,e}function noop(r){r&&onIdle(r)}var onIdle=require(29),perf,disabled=!0;try{perf=window.performance,disabled="true"===window.localStorage.DISABLE_NANOTIMING||!perf.mark}catch(r){}module.exports=nanotiming;

},{"29":29}],29:[function(require,module,exports){
function onIdle(d,e){e=e||dftOpts;var n;return hasIdle?(n=window.requestIdleCallback(function(n){if(n.timeRemaining()<=10&&!n.didTimeout)return onIdle(d,e);d(n)},e),window.cancelIdleCallback.bind(window,n)):hasWindow?(n=setTimeout(d,0),clearTimeout.bind(window,n)):void 0}var dftOpts={},hasWindow="undefined"!=typeof window,hasIdle=hasWindow&&window.requestIdleCallback;module.exports=onIdle;

},{}],30:[function(require,module,exports){
"use strict";module.exports=function(t,e,r){var n,o=t.length;if(!(e>=o||0===r)){var f=o-(r=e+r>o?o-e:r);for(n=e;n<f;++n)t[n]=t[n+r];t.length=f}};

},{}],31:[function(require,module,exports){
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function defaultEqualityCheck(e,r){return e===r}function defaultMemoize(e){var r=arguments.length<=1||void 0===arguments[1]?defaultEqualityCheck:arguments[1],t=null,n=null;return function(){for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return null!==t&&t.length===a.length&&a.every(function(e,n){return r(e,t[n])})||(n=e.apply(void 0,a)),t=a,n}}function getDependencies(e){var r=Array.isArray(e[0])?e[0]:e;if(!r.every(function(e){return"function"==typeof e})){var t=r.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+t+"]")}return r}function createSelectorCreator(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var a=0,c=n.pop(),u=getDependencies(n),i=e.apply(void 0,[function(){return a++,c.apply(void 0,arguments)}].concat(t)),l=function(e,r){for(var t=arguments.length,n=Array(t>2?t-2:0),o=2;o<t;o++)n[o-2]=arguments[o];var a=u.map(function(t){return t.apply(void 0,[e,r].concat(n))});return i.apply(void 0,_toConsumableArray(a))};return l.resultFunc=c,l.recomputations=function(){return a},l.resetRecomputations=function(){return a=0},l}}function createStructuredSelector(e){var r=arguments.length<=1||void 0===arguments[1]?createSelector:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var t=Object.keys(e);return r(t.map(function(r){return e[r]}),function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(e,r,n){return e[t[n]]=r,e},{})})}exports.__esModule=!0,exports.defaultMemoize=defaultMemoize,exports.createSelectorCreator=createSelectorCreator,exports.createStructuredSelector=createStructuredSelector;var createSelector=exports.createSelector=createSelectorCreator(defaultMemoize);

},{}],32:[function(require,module,exports){
function scrollToAnchor(o,c){if(o)try{var r=document.querySelector(o);r&&r.scrollIntoView(c)}catch(o){}}module.exports=scrollToAnchor;

},{}],33:[function(require,module,exports){
var vec2={create:require(11),add:require(9),dot:require(13),sub:require(18),scale:require(16),distance:require(12)};module.exports=require(34)(vec2);

},{"11":11,"12":12,"13":13,"16":16,"18":18,"34":34,"9":9}],34:[function(require,module,exports){
module.exports=function(s){function t(t,i){if(!t||2!==t.length)throw new Error("two points must be specified for the constraint");if(!t[0].position||!t[1].position)throw new Error("must specify verlet-point or similar, with { position }");this.points=t,this.stiffness=1,i&&"number"==typeof i.stiffness&&(this.stiffness=i.stiffness),this.restingDistance=i&&"number"==typeof i.restingDistance?i.restingDistance:s.distance(this.points[0].position,this.points[1].position)}var i=s.create(),e=s.create();return t.prototype.solve=function(){var t=this.points[0],n=this.points[1],o=t.position,r=n.position,f="number"==typeof t.mass?t.mass:1,p="number"==typeof n.mass?n.mass:1;s.sub(i,o,r);var a,h,c=Math.sqrt(s.dot(i,i)),u=0===c?this.restingDistance:(this.restingDistance-c)/c;if(0==f&&0==p)a=0,h=0;else if(0==f&&p>0)a=0,h=this.stiffness;else if(f>0&&0==p)a=this.stiffness,h=0;else{var m=1/f;a=m/(m+1/p)*this.stiffness,h=this.stiffness-a}return s.scale(e,i,a*u),s.add(o,o,e),s.scale(e,i,h*u),s.sub(r,r,e),c},function(s,i,e){return new t(s,i,e)}};

},{}],35:[function(require,module,exports){
var vec2={create:require(11),sub:require(18),copy:require(10)};module.exports=require(36)(vec2);

},{"10":10,"11":11,"18":18,"36":36}],36:[function(require,module,exports){
module.exports=function(i){function t(t){this.position=i.create(),this.previous=i.create(),this.acceleration=i.create(),this.mass=1,this.radius=0,t&&"number"==typeof t.mass&&(this.mass=t.mass),t&&"number"==typeof t.radius&&(this.radius=t.radius),t&&t.position&&i.copy(this.position,t.position),t&&(t.previous||t.position)&&i.copy(this.previous,t.previous||t.position),t&&t.acceleration&&i.copy(this.acceleration,t.acceleration)}return t.prototype.addForce=function(t){return i.sub(this.previous,this.previous,t),this},t.prototype.place=function(t){return i.copy(this.position,t),i.copy(this.previous,t),this},function(i){return new t(i)}};

},{}],37:[function(require,module,exports){
var vec2={create:require(11),add:require(9),multiply:require(15),sub:require(18),scale:require(16),copy:require(10),sqrLen:require(17),fromValues:require(14)};module.exports=require(39)(vec2);

},{"10":10,"11":11,"14":14,"15":15,"16":16,"17":17,"18":18,"39":39,"9":9}],38:[function(require,module,exports){
module.exports=function(o){var r=o.fromValues(-1/0,-1/0,-1/0),e=o.fromValues(1/0,1/0,1/0),i=o.fromValues(1,1,1),t=o.create();return function(n,s,a,f,u){if(a||f){o.copy(t,i),a=a||r,f=f||e;var p=0,l=n.position.length,m=!1,c=n.radius||0;for(p=0;p<l;p++)"number"==typeof a[p]&&n.position[p]-c<a[p]&&(t[p]=-1,n.position[p]=a[p]+c,m=!0);for(p=0;p<l;p++)"number"==typeof f[p]&&n.position[p]+c>f[p]&&(t[p]=-1,n.position[p]=f[p]-c,m=!0);var v=o.sqrLen(s);if(m&&!(v<=1e-6)){var y=Math.sqrt(v);0!==y&&o.scale(s,s,1/y),o.scale(t,t,y*u),o.multiply(s,s,t)}}}};

},{}],39:[function(require,module,exports){
var number=require(2),clamp=require(6),createCollider=require(38);module.exports=function(i){function e(t){if(!(this instanceof e))return new e(t);t=t||{},this.gravity=t.gravity||i.create(),this.friction=number(t.friction,.98),this.min=t.min,this.max=t.max,this.bounce=number(t.bounce,1)}var t=createCollider(i),o=i.create(),n=i.create(),r=i.create();return e.prototype.collision=function(i,e){t(i,e,this.min,this.max,this.bounce)},e.prototype.integratePoint=function(e,t){var a="number"==typeof e.mass?e.mass:1;if(0===a)return this.collision(e,r),void i.copy(e.acceleration,r);i.add(e.acceleration,e.acceleration,this.gravity),i.scale(e.acceleration,e.acceleration,a),i.sub(o,e.position,e.previous),i.scale(o,o,this.friction),this.collision(e,o),i.copy(e.previous,e.position);var c=t*t;i.scale(n,e.acceleration,.5*c),i.add(e.position,e.position,o),i.add(e.position,e.position,n),i.copy(e.acceleration,r)},e.prototype.integrate=function(i,e){for(var t=0;t<i.length;t++)this.integratePoint(i[t],e)},e};

},{"2":2,"38":38,"6":6}],40:[function(require,module,exports){
function Wayfarer(r){function e(r){for(var e=new Array(arguments.length),n=1;n<e.length;n++)e[n]=arguments[n];var i=t.match(r);if(i&&i.cb){e[0]=i.params;var c=i.cb;return c.apply(c,e)}var f=t.match(a);if(f&&f.cb){e[0]=f.params;var o=f.cb;return o.apply(o,e)}throw new Error("route '"+r+"' did not match")}if(!(this instanceof Wayfarer))return new Wayfarer(r);var a=(r||"").replace(/^\//,""),t=trie();return e._trie=t,e.emit=e,e.on=function(r,a){return r=r||"/",a.route=r,a&&a._wayfarer&&a._trie?t.mount(r,a._trie.trie):t.create(r).cb=a,e},e._wayfarer=!0,e}var trie=require(41);module.exports=Wayfarer;

},{"41":41}],41:[function(require,module,exports){
function Trie(){if(!(this instanceof Trie))return new Trie;this.trie={nodes:{}}}var mutate=require(43),xtend=require(42);module.exports=Trie,Trie.prototype.create=function(e){function n(e,t){var o=r.hasOwnProperty(e)&&r[e];if(!1===o)return t;var i=null;return/^:|^\*/.test(o)?(t.nodes.hasOwnProperty("$$")?i=t.nodes.$$:(i={nodes:{}},t.nodes.$$=i),"*"===o[0]&&(t.wildcard=!0),t.name=o.replace(/^:|^\*/,"")):t.nodes.hasOwnProperty(o)?i=t.nodes[o]:(i={nodes:{}},t.nodes[o]=i),n(e+1,i)}var r=e.replace(/^\//,"").split("/");return n(0,this.trie)},Trie.prototype.match=function(e){function n(e,o){if(void 0!==o){var i=r[e];if(void 0===i)return o;if(o.nodes.hasOwnProperty(i))return n(e+1,o.nodes[i]);if(o.name){try{t[o.name]=decodeURIComponent(i)}catch(r){return n(e,void 0)}return n(e+1,o.nodes.$$)}if(o.wildcard){try{t.wildcard=decodeURIComponent(r.slice(e).join("/"))}catch(r){return n(e,void 0)}return o.nodes.$$}return n(e+1)}}var r=e.replace(/^\//,"").split("/"),t={},o=n(0,this.trie);if(o)return o=xtend(o),o.params=t,o},Trie.prototype.mount=function(e,n){var r=e.replace(/^\//,"").split("/"),t=null,o=null;if(1===r.length)o=r[0],t=this.create(o);else{var i=r.splice(0,r.length-1).join("/");o=r[0],t=this.create(i)}mutate(t.nodes,n.nodes),n.name&&(t.name=n.name),t.nodes[""]&&(Object.keys(t.nodes[""]).forEach(function(e){"nodes"!==e&&(t[e]=t.nodes[""][e])}),mutate(t.nodes,t.nodes[""].nodes),delete t.nodes[""].nodes)};

},{"42":42,"43":43}],42:[function(require,module,exports){
function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],43:[function(require,module,exports){
function extend(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],44:[function(require,module,exports){
module.exports=function e(t,n){for(var o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i))e(t,i);else{if(("number"==typeof i||"boolean"==typeof i||i instanceof Date||i instanceof RegExp)&&(i=i.toString()),"string"==typeof i){if(/^[\n\r\s]+$/.test(i))continue;if(t.lastChild&&"#text"===t.lastChild.nodeName){t.lastChild.nodeValue+=i;continue}i=document.createTextNode(i)}i&&i.nodeType&&t.appendChild(i)}}};

},{}],45:[function(require,module,exports){
const{createSelector:createSelector}=require(31),Parser=require(8).Parser,xtend=require(42),solver=require(55),getMeasurements=function(e){return e.pattern.measurements},getSolvedMeasurements=createSelector([function(e){return e.pattern.measurements}],function(e){const{base:t,derived:r}=e;let n={};for(let e=0,r=t.length;e<r;e++){const{key:r,value:s}=t[e];n[r]=s}for(let e=0,t=r.length;e<t;e++){const{key:t,value:s}=r[e];n[t]=Parser.evaluate(s,n)}return n}),getParts=function(e){return e.pattern.parts},getPartsPoints=createSelector([function(e){return e.pattern.parts}],function(e){return e.map(function(t){const{id:r,from:n,reflect:s}=t;if(n)for(let o=0,a=e.length;o<a;o++){const a=e[o];if(a.id===n){const n=s.indexOf("x")>-1?-1:1,u=s.indexOf("y")>-1?-1:1,c=a.points.map(function(e){return{x:e.x*n,y:e.y*u}});return t=xtend(e[o],{id:r,points:c})}}return t})}),getSolvedParts=createSelector([getPartsPoints,getSolvedMeasurements],function(e,t){return e.map(function(e){const{points:r,constraints:n,symmetry:s}=e;return solver(r,n,s,t,360)})});module.exports={getSolvedMeasurements:getSolvedMeasurements,getPartsPoints:getPartsPoints,getSolvedParts:getSolvedParts};

},{"31":31,"42":42,"55":55,"8":8}],46:[function(require,module,exports){
function mainView(e,t,n){const{pattern:r,selectedPart:s,solverSteps:o}=e,{id:a,parts:l,measurements:i}=r,d=getSolvedMeasurements(e),c=getPartsPoints(e),u=getSolvedParts(e);return function(){var e=require(44),t=document.createElement("main");t.setAttribute("class",arguments[9]);var n=document.createElement("h1");e(n,[arguments[0]]);var r=document.createElement("section"),s=document.createElement("h2");e(s,["base measurements"]);var o=document.createElement("h2");e(o,["derived values"]),e(r,["\n        ",s,"\n        ",arguments[1],"\n        todo: load from bodylabs\n        ",o,"\n        ",arguments[2],"\n        todo: add & edit\n      "]);var a=document.createElement("section"),l=document.createElement("h2");e(l,["base part shapes"]);var i=document.createElement("h2");e(i,["constraints"]);var d=document.createElement("ul"),c=document.createElement("li");e(c,["add parts"]);var u=document.createElement("li");e(u,["edit path / drag points"]),e(d,["\n          ",c,"\n          ",u,"\n        "]),e(a,["\n        ",l,"\n        ",arguments[3],"\n        ",i,"\n        ",arguments[4],"\n        todo:\n        ",d,"\n      "]);var m=document.createElement("section"),v=document.createElement("h2");e(v,["solved shape"]);var p=document.createElement("input");p.setAttribute("type","range"),p.setAttribute("min","0"),p.setAttribute("max","360"),p.setAttribute("value",arguments[5]),p.oninput=arguments[6],p.setAttribute("style","width: 500px;"),e(m,["\n        ",v,"\n        ",p,"\n        ",arguments[7],"\n        todo: select points in selected part, add/edit distance/angle constraints\n      "]);var h=document.createElement("section"),g=document.createElement("h2");e(g,["sewing order"]),e(h,["\n        ",g,"\n        todo: sew sim\n      "]);var f=document.createElement("section"),E=document.createElement("h2");e(E,["take over world"]),e(f,["\n        ",E,"\n        todo: site for sharing and commissioning (seamster?)\n      "]);var P=document.createElement("section"),b=document.createElement("h2");e(b,["debug"]);var x=document.createElement("pre");return x.setAttribute("style","max-height: 50vh; overflow: auto;"),e(x,[arguments[8]]),e(P,["\n        ",b,"\n        ",x,"\n      "]),e(t,["\n      ",n,"\n      ",r,"\n      ",a,"\n      ",m,"\n      ",h,"\n      ",f,"\n      ",P,"\n    "]),t}(a,olMeasurements(i.base,n),olDerived(i.derived,d),olParts(c,u,s,n),null!=s&&olConstraints(c[s].constraints),o,function(e){const t=parseInt(e.target.value,10);n("setState",{solverSteps:t})},null!=s&&svgConstrained(c[s],d,o,500,500,n),JSON.stringify(e,null,2),prefix)}function startApp(e){const t=choo();return t.router({default:"/"},["/",mainView]),e&&(model.state=xtend(model.state,e)),t.model(model),t.start()}const html=require(4),choo=require(5),xtend=require(42),css=0,{getSolvedMeasurements:getSolvedMeasurements,getPartsPoints:getPartsPoints,getSolvedParts:getSolvedParts}=require(45),olParts=require(51),olMeasurements=require(50),olDerived=require(49),olConstraints=require(48),svgConstrained=require(52),prefix=(null||!0)&&"_44855693",model={state:{pattern:{},selectedPart:0,selectedPoint:null,solverSteps:360},reducers:{selectPart:function(e,t){return{selectedPart:t}},selectPoint:function(e,t){return{selectedPoint:t}},setMeasurement:function(e,t){let{pattern:n}=e;const r=n.measurements.base.slice(),{key:s,value:o}=t;for(let e=0,t=r.length;e<t;e++)r[e].key===s&&(r[e]={key:s,value:o});return n.measurements.base=r,n.measurements=xtend(n.measurements,{}),n=xtend(n,{}),{pattern:n}},setState:function(e,t){return t}}};module.exports=startApp;

},{"3":3,"4":4,"42":42,"44":44,"45":45,"48":48,"49":49,"5":5,"50":50,"51":51,"52":52}],47:[function(require,module,exports){
function pointsBox(t){let n=-1/0,e=-1/0,o=1/0,i=1/0;for(let r=0,y=t.length;r<y;r++){const{x:y,y:s}=t[r];n=Math.max(n,s),e=Math.max(e,y),o=Math.min(o,s),i=Math.min(i,y)}return{left:i,bottom:o,width:e-i,height:n-o}}function pointReflect(t,n,e){const o=e.x-n.x,i=e.y-n.y,r=(o*o-i*i)/(o*o+i*i),y=2*o*i/(o*o+i*i);return{x:r*(t.x-n.x)+y*(t.y-n.y)+n.x,y:y*(t.x-n.x)-r*(t.y-n.y)+n.y}}function pointsWithSymmetry(t){if(t.length<3)throw new Error("Need more than 2 points for symmetry");const n=t.slice(),e=t[0],o=t[t.length-1];let i=t.length-2;for(;i>0;){const r=t[i];n.push(pointReflect(r,e,o)),i--}return n}function pointsFit(t,n,e,o=4){n-=2*o,e-=2*o;const{left:i,bottom:r,width:y,height:s}=pointsBox(t),x=Math.min(n/y,e/s),h=Math.max(0,(n-y*x)/2),c=Math.max(0,(e-s*x)/2);return t.map(function(t){return{x:(t.x-i)*x+h+o,y:(t.y-r)*x+c+o}})}function dClosed(t){let n="M ";for(let e=0,o=t.length;e<o;e++){const{x:o,y:i}=t[e];n+=o+" "+i+" L "}return n+=t[0].x+" "+t[0].y}function distanceBetween(t,n){var e=Math.pow(t.x-n.x,2),o=Math.pow(t.y-n.y,2);return Math.sqrt(e+o)}function unitVector(t,n,e=1){const o=n.x-t.x,i=n.y-t.y,r=distanceBetween(t,n);return{x:o/r*e,y:i/r*e}}function pointAdd(t,n){return{x:t.x+n.x,y:t.y+n.y}}module.exports={pointsFit:pointsFit,pointsWithSymmetry:pointsWithSymmetry,dClosed:dClosed,distanceBetween:distanceBetween,unitVector:unitVector,pointAdd:pointAdd};

},{}],48:[function(require,module,exports){
const html=require(4),liDistance=function(e,n){return function(){var e=require(44),n=document.createElement("li"),t=document.createElement("label");return e(t,["\n      ",arguments[0],"\n      ",arguments[1],"\n    "]),e(n,["\n    ",t,"\n  "]),n}(e.points.join(", "),e.distance)},liAngle=function(e,n){return function(){var e=require(44),n=document.createElement("li"),t=document.createElement("label");return e(t,["\n      ",arguments[0],"\n      ",arguments[1],"\n    "]),e(n,["\n    ",t,"\n  "]),n}(e.points.join(", "),e.angle)},olConstraints=function(e){const{distances:n,angles:t}=e;return function(){var e=require(44),n=document.createElement("div"),t=document.createElement("h3");e(t,["distances"]);var r=document.createElement("ol");e(r,["\n      ",arguments[0],"\n    "]);var o=document.createElement("h3");e(o,["angles"]);var l=document.createElement("ol");return e(l,["\n      ",arguments[1],"\n    "]),e(n,["\n    ",t,"\n    ",r,"\n    ",o,"\n    ",l,"\n  "]),n}(n.map(liDistance),t.map(liAngle))};module.exports=function(e){const{distances:n,angles:t}=e;return function(){var e=require(44),n=document.createElement("div"),t=document.createElement("h3");e(t,["distances"]);var r=document.createElement("ol");e(r,["\n      ",arguments[0],"\n    "]);var o=document.createElement("h3");e(o,["angles"]);var l=document.createElement("ol");return e(l,["\n      ",arguments[1],"\n    "]),e(n,["\n    ",t,"\n    ",r,"\n    ",o,"\n    ",l,"\n  "]),n}(n.map(liDistance),t.map(liAngle))};

},{"4":4,"44":44}],49:[function(require,module,exports){
const html=require(4),olDerived=function(e,t){return function(){var e=require(44),t=document.createElement("ol");return e(t,["\n    ",arguments[0],"\n  "]),t}(e.map(function(e,n){return function(){var e=require(44),t=document.createElement("li"),n=document.createElement("label"),r=document.createElement("input");return r.setAttribute("type","text"),r.setAttribute("value",arguments[0]),r.setAttribute("disabled","disabled"),e(n,["\n        ",arguments[1],"\n        ",r,"\n        ",arguments[2],"\n      "]),e(t,["\n      ",n,"\n    "]),t}(e.value,e.key,t[e.key])}))};module.exports=function(e,t){return function(){var e=require(44),t=document.createElement("ol");return e(t,["\n    ",arguments[0],"\n  "]),t}(e.map(function(e,n){return function(){var e=require(44),t=document.createElement("li"),n=document.createElement("label"),r=document.createElement("input");return r.setAttribute("type","text"),r.setAttribute("value",arguments[0]),r.setAttribute("disabled","disabled"),e(n,["\n        ",arguments[1],"\n        ",r,"\n        ",arguments[2],"\n      "]),e(t,["\n      ",n,"\n    "]),t}(e.value,e.key,t[e.key])}))};

},{"4":4,"44":44}],50:[function(require,module,exports){
const html=require(4),css=0,prefix=(null||!0)&&"_f20ced55",liMeasurement=function(e,t){function n(e){const t=parseFloat(e.target.value);isNaN(t)||i("setMeasurement",{key:r,value:t})}const{key:r,value:s}=e,{send:i}=this;return function(){var e=require(44),t=document.createElement("li"),n=document.createElement("label"),r=document.createElement("input");r.setAttribute("type","number"),r.setAttribute("value",arguments[0]),r.oninput=arguments[1],r.setAttribute("class","spinner");var s=document.createElement("input");return s.setAttribute("type","range"),s.setAttribute("value",arguments[2]),s.setAttribute("min","0"),s.setAttribute("max",arguments[3]),s.setAttribute("step","0.125"),s.oninput=arguments[4],s.setAttribute("class","slider"),e(n,["\n      ",arguments[5],"\n      ",r,"\n      ",s,"\n    "]),e(t,["\n    ",n,"\n  "]),t}(s,n,s,Math.max(s,200),n,r)},olMeasurements=function(e,t){return function(){var e=require(44),t=document.createElement("ol");return t.setAttribute("class",arguments[0]),e(t,["\n    ",arguments[1],"\n  "]),t}(prefix,e.map(liMeasurement,{send:t}))};module.exports=function(e,t){return function(){var e=require(44),t=document.createElement("ol");return t.setAttribute("class",arguments[0]),e(t,["\n    ",arguments[1],"\n  "]),t}(prefix,e.map(liMeasurement,{send:t}))};

},{"3":3,"4":4,"44":44}],51:[function(require,module,exports){
const html=require(4),xtend=require(42),svgPart=require(53),WIDTH=72,HEIGHT=72,liPart=function(t,r,e,n,s){const{points:o,constraints:i,symmetry:u,id:c}=t,{systemPoints:l,systemDistances:a,systemAngles:d}=r;return function(){var t=require(44),r=document.createElement("li");return r.setAttribute("style","\n        background-color: "+arguments[0]+";\n      "),r.onclick=arguments[1],t(r,["\n      ",arguments[2],"\n      ",arguments[3],"\n      ",arguments[4],"\n    "]),r}(n?"cornsilk":"transparent",function(){s("selectPart",e)},svgPart(o,u,null,72,72),svgPart(l,u,i,72,72,a,d),c)},olParts=function(t,r,e,n){return function(){var t=require(44),r=document.createElement("ol");return t(r,["\n      ",arguments[0],"\n    "]),r}(t.map(function(t,s){const o=e===s;return liPart(t,r[s],s,o,n)}))};module.exports=function(t,r,e,n){return function(){var t=require(44),r=document.createElement("ol");return t(r,["\n      ",arguments[0],"\n    "]),r}(t.map(function(t,s){const o=e===s;return liPart(t,r[s],s,o,n)}))};

},{"4":4,"42":42,"44":44,"53":53}],52:[function(require,module,exports){
const html=require(4),svgPart=require(53),solver=require(55),svgConstrained=function(s,t,e=360,r=500,n=500){const{points:o,symmetry:i,constraints:m}=s,{systemPoints:c,systemDistances:l,systemAngles:v}=solver(o,m,i,t,e);return svgPart(c,i,m,r,n,l,v)};module.exports=function(s,t,e=360,r=500,n=500){const{points:o,symmetry:i,constraints:m}=s,{systemPoints:c,systemDistances:l,systemAngles:v}=solver(o,m,i,t,e);return svgPart(c,i,m,r,n,l,v)};

},{"4":4,"53":53,"55":55}],53:[function(require,module,exports){
function line(t,e,n=1,r="green"){return function(){require(44);var t=document.createElementNS("http://www.w3.org/2000/svg","line");return t.setAttributeNS(null,"x1",arguments[0]),t.setAttributeNS(null,"y1",arguments[1]),t.setAttributeNS(null,"x2",arguments[2]),t.setAttributeNS(null,"y2",arguments[3]),t.setAttributeNS(null,"stroke-width",arguments[4]),t.setAttributeNS(null,"stroke",arguments[5]),t}(t.x,t.y,e.x,e.y,n,r)}function lineDistance(t,e){let n=[];for(let r=0,i=t.points.length;r<i-1;r++){let i=t.points[r];i<0&&(i=e.length+i);let l=t.points[r+1];l<0&&(l=e.length+l),n.push(line(e[i],e[l],1,"blue"))}return n}function gDistances(t,e){return function(){var t=require(44),e=document.createElementNS("http://www.w3.org/2000/svg","g");return t(e,["\n    ",arguments[0],"\n  "]),e}(t.map(function(t){return lineDistance(t,e)}))}function arcAngle(t,e){const{restingAngle:n,angle:r,diff:i}=t,l=e[t.points[0].index],s=e[t.points[1].index],o=e[t.points[2].index];let u="transparent";null!=r&&(u=`rgba(255,0,0,${Math.abs(i)/Math.PI})`);const c=pointAdd(unitVector(s,l,10),s),d=pointAdd(unitVector(s,o,10),s),a=(r||n)>Math.PI/2?1:0;return function(){var t=require(44),e=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttributeNS(null,"d","\n      M "+arguments[0]+" "+arguments[1]+"\n      L "+arguments[2]+" "+arguments[3]+"\n      A "+arguments[4]+" "+arguments[5]+" 0 "+arguments[6]+" 0 "+arguments[7]+" "+arguments[8]+"\n      Z\n    "),n.setAttributeNS(null,"stroke","black"),n.setAttributeNS(null,"fill",arguments[9]),t(e,["\n    ",n,"\n  "]),e}(s.x,s.y,c.x,c.y,10,10,a,d.x,d.y,u)}function gAngles(t,e){return function(){var t=require(44),e=document.createElementNS("http://www.w3.org/2000/svg","g");return t(e,["\n    ",arguments[0],"\n  "]),e}(t.map(function(t){return arcAngle(t,e)}))}function gPoint(t,e,n,r){return r&&e>n/2&&(e-=n),function(){var t=require(44),e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"transform","translate("+arguments[1]+" "+arguments[2]+")");var n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttributeNS(null,"x","5"),n.setAttributeNS(null,"y","-10"),n.setAttributeNS(null,"width","20"),n.setAttributeNS(null,"height","20"),n.setAttributeNS(null,"fill","rgba(255, 255, 255, 0.75)"),n.setAttributeNS(null,"stroke","none");var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"cx","0"),r.setAttributeNS(null,"cy","0"),r.setAttributeNS(null,"r","2"),r.setAttributeNS(null,"fill","black"),r.setAttributeNS(null,"stroke","none");var i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.setAttributeNS(null,"x","10"),i.setAttributeNS(null,"y","5"),t(i,[arguments[0]]),t(e,["\n    ",n,"\n    ",r,"\n    ",i,"\n  "]),e}(e,t.x,t.y)}function gPoints(t,e){const n=t.length;return function(){var t=require(44),e=document.createElementNS("http://www.w3.org/2000/svg","g");return t(e,["\n    ",arguments[0],"\n  "]),e}(t.map(function(t,r){return gPoint(t,r,n,e)}))}function svgPart(t,e=!1,n=null,r=72,i=72,l=null,s=null){const o=t.length-1;return e&&(t=pointsWithSymmetry(t)),t=pointsFit(t,r,i),function(){var t=require(44),e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"width",arguments[1]),e.setAttributeNS(null,"height",arguments[2]),e.setAttributeNS(null,"style","\n        overflow:visible;\n        border: 1px solid #ccc;\n        border-radius: 5px;\n        background-color: #eee;\n      ");var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttributeNS(null,"d",arguments[0]),n.setAttributeNS(null,"fill","#fff"),n.setAttributeNS(null,"stroke","#000"),n.setAttributeNS(null,"stroke-width","1"),t(e,["\n      ",n,"\n      ",arguments[3],"\n      ",arguments[4],"\n      ",arguments[5],"\n      \n      ",arguments[6],"\n    "]),e}(dClosed(t),r,i,n&&n.distances&&gDistances(n.distances,t),r>=200&&s&&gAngles(s,t),e&&line(t[0],t[o]),r>=200&&gPoints(t,e))}const html=require(4),{pointsFit:pointsFit,pointsWithSymmetry:pointsWithSymmetry,dClosed:dClosed,unitVector:unitVector,pointAdd:pointAdd}=require(47);module.exports=svgPart;

},{"4":4,"44":44,"47":47}],54:[function(require,module,exports){
function angle(t,i){return Math.atan2(t[0]*i[1]-t[1]*i[0],t[0]*i[0]+t[1]*i[1])}function angle2(t,i,n){return angle([t[0]-i[0],t[1]-i[1]],[n[0]-i[0],n[1]-i[1]])}function rotate(t,i,n){const o=t[0]-i[0],s=t[1]-i[1];return[o*Math.cos(n)-s*Math.sin(n)+i[0],o*Math.sin(n)+s*Math.cos(n)+i[1]]}function AngleConstraint(t,i){if(!t||3!==t.length)throw new Error("three points must be specified for the constraint");if(!t[0].position||!t[1].position||!t[2].position)throw new Error("must specify verlet-point or similar, with { position }");this.points=t,this.stiffness=1,i&&"number"==typeof i.stiffness&&(this.stiffness=i.stiffness),this.restingAngle=i&&"number"==typeof i.restingAngle?i.restingAngle:angle2(this.points[0].position,this.points[1].position,this.points[2].position)}AngleConstraint.prototype.solve=function(t=60){const i=this.points[0],n=this.points[1],o=this.points[2],s=angle2(i.position,n.position,o.position);let e=s-this.restingAngle;e<=-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),this.angle=s,this.diff=e,e*=this.stiffness*(1/t),i.position=rotate(i.position,n.position,e),o.position=rotate(o.position,n.position,-e),n.position=rotate(n.position,i.position,e),n.position=rotate(n.position,o.position,-e)},module.exports={AngleConstraint:AngleConstraint,rotate:rotate};

},{}],55:[function(require,module,exports){
function pointToVertex(t,n){const e=new Point({position:pointToPosition(t)});return e.index=n,e}function pointToPosition(t){return[t.x,t.y]}function vertexToPoint(t){return positionToPoint(t.position)}function positionToPoint(t){return{x:t[0],y:t[1]}}function verticesRotate(t,n,e,o,i){function s(t,n){return Math.atan2(n[1]-t[1],n[0]-t[0])}const r=s(n,e)-s(o,i),c=[(o[0]+i[0])/2,(o[1]+i[1])/2];return t.map(function(t){return rotate(t.position,c,r)})}function getDistance(t,n){if(n[t.distance])return n[t.distance];throw new Error("measurement not found")}function mutableMergeConstraint(t,n){const e=n.points[0],o=n.points[1];for(let i=0,s=t.length;i<s;i++){const s=t[i],r=s.points[0],c=s.points[1];if(r===e&&c===o||r===o&&c===e)return void(t[i]=n)}t.push(n)}function mergeDistance(t,n,e,o){const i=e.points.map(function(n){return n<0&&(n=t.length+n),t[n]});let s=[];const r=i.reduce(function(t,n,e){const o=n,r=i[e+1];if(!o||!r)return t;const c=distanceBetween({x:o.position[0],y:o.position[1]},{x:r.position[0],y:r.position[1]});return s[e]=c,t+c},0),c=s.map(function(t){return t/r}),u=getDistance(e,o),a=c.map(function(t){return u*t});for(let t=0,e=a.length;t<e;t++){const e=a[t];mutableMergeConstraint(n,new Constraint([i[t],i[t+1]],{restingDistance:e,stiffness:.9}))}return n}function mergeDistances(t,n,e,o){let i=n.slice();for(let n=0,s=e.length;n<s;n++)mergeDistance(t,i,e[n],o);return i}function verticesToDistances(t){const n=t.length;return t.map(function(e,o){var i=(o+1)%n;return new Constraint([t[o],t[i]],{stiffness:.1})})}function verticesToAngles(t){const n=t.length;return t.map(function(e,o){var i=(o+1)%n,s=(o+2)%n;return new AngleConstraint([t[o],t[i],t[s]],{stiffness:.5})})}function solver(t,n,e,o,i=360){const{distances:s,angles:r}=n;if(!(s&&s.length||r&&r.length))return{systemPoints:t};const c=t.slice(),u=c.length;e&&(t=pointsWithSymmetry(t));const a=System(),l=t.map(pointToVertex),f=verticesToDistances(l),p=mergeDistances(l,f,s,o),g=verticesToAngles(l),m=p,h=g;for(let t=0;t<i;t++)!function(){a.integrate(l,1e3/60);for(let t=0,n=m.length;t<n;t++)m[t].solve();for(let t=0,n=h.length;t<n;t++)h[t].solve()}();const v=pointToPosition(c[0]),y=pointToPosition(c[u-1]),T=l.slice(0,u-0);return{systemPoints:verticesRotate(T,v,y,T[0].position,T[T.length-1].position).map(positionToPoint),systemDistances:m,systemAngles:h}}const System=require(37),Point=require(35),Constraint=require(33),{AngleConstraint:AngleConstraint,rotate:rotate}=require(54),{pointsWithSymmetry:pointsWithSymmetry,distanceBetween:distanceBetween}=require(47);module.exports=solver;

},{"33":33,"35":35,"37":37,"47":47,"54":54}]},{},[1]);
